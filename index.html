<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIMI 3D PRINT STUDIO – Professional FDM Service</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bambu-green: #00ae42;
            --bambu-dark: #1a1a1a;
            --bambu-gray: #f4f4f5;
            --primary-blue: #003d52;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #18181b;
            scroll-behavior: smooth;
        }

        .text-bambu { color: var(--bambu-green); }
        .bg-bambu { background-color: var(--bambu-green); }
        .border-bambu { border-color: var(--bambu-green); }
        
        .section-padding { padding: 80px 0; }
        
        .card-shadow {
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease;
        }
        .card-shadow:hover {
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        .btn-primary {
            background-color: var(--bambu-green);
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            background-color: #008f36;
            transform: scale(1.02);
        }

        .nav-link {
            position: relative;
            font-weight: 500;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: var(--bambu-green);
            transition: width 0.3s ease;
        }
        .nav-link:hover::after { width: 100%; }

        .active-material {
            border-color: var(--bambu-green) !important;
            background-color: rgba(0, 174, 66, 0.05);
            color: var(--bambu-green) !important;
        }

        .stat-bar { height: 8px; border-radius: 4px; background: #f1f5f9; border: 1px solid #e2e8f0; overflow: hidden; }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100">
        <div class="container mx-auto px-4 h-16 md:h-20 flex items-center justify-between">
            <a href="#" class="flex items-center gap-3">
                <div class="w-8 h-8 bg-bambu rounded flex items-center justify-center">
                    <i class="fas fa-cube text-white text-lg"></i>
                </div>
                <div class="flex flex-col">
                    <span class="text-xl font-extrabold tracking-tight leading-none text-gray-900 text-nowrap">TIMI 3D</span>
                    <span class="text-[10px] font-bold text-gray-400 tracking-widest uppercase">Print Studio</span>
                </div>
            </a>
            
            <nav class="hidden md:flex items-center space-x-10">
                <a href="#calculator" class="nav-link text-sm text-gray-600">Công cụ tính giá</a>
                <a href="#pricing" class="nav-link text-sm text-gray-600">Bảng giá vật liệu</a>
                <a href="#contact" class="btn-primary text-white px-6 py-2 rounded font-semibold text-sm">Gửi yêu cầu in</a>
            </nav>
            
            <button class="md:hidden text-gray-800 text-xl"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gray-50 overflow-hidden">
        <div class="container mx-auto px-4 flex flex-col md:flex-row items-center py-16 md:py-24 gap-12">
            <div class="md:w-1/2 text-center md:text-left">
                <h1 class="text-5xl md:text-7xl font-extrabold mb-6 leading-[1.1] tracking-tight text-gray-900">
                    Sáng tạo không <br><span class="text-bambu italic">giới hạn.</span>
                </h1>
                <p class="text-lg text-gray-600 mb-10 max-w-lg leading-relaxed">
                    Dịch vụ in 3D FDM chất lượng cao tại Rạch Giá. Chúng tôi tập trung vào độ chính xác, tốc độ và chi phí tối ưu nhất cho mọi dự án.
                </p>
                <div class="flex flex-wrap justify-center md:justify-start gap-4">
                    <a href="#calculator" class="btn-primary text-white px-10 py-4 rounded font-bold text-base shadow-lg shadow-green-200 text-center">Bắt đầu ngay</a>
                    <a href="https://facebook.com/in3drga" target="_blank" class="bg-white border border-gray-200 text-gray-800 px-10 py-4 rounded font-bold text-base hover:bg-gray-50 transition text-center">Facebook Page</a>
                </div>
                <div class="mt-10 flex items-center justify-center md:justify-start gap-8 text-gray-400">
                    <div class="text-center md:text-left">
                        <div class="text-xl font-bold text-gray-900">400mm</div>
                        <div class="text-[10px] uppercase font-bold tracking-widest text-gray-500">Khổ in tối đa</div>
                    </div>
                    <div class="w-px h-8 bg-gray-200"></div>
                    <div class="text-center md:text-left">
                        <div class="text-xl font-bold text-gray-900">0.1mm</div>
                        <div class="text-[10px] uppercase font-bold tracking-widest text-gray-500">Độ mịn lớp in</div>
                    </div>
                    <div class="w-px h-8 bg-gray-200"></div>
                    <div class="text-center md:text-left">
                        <div class="text-xl font-bold text-gray-900">24/7</div>
                        <div class="text-[10px] uppercase font-bold tracking-widest text-gray-500">Hệ thống vận hành</div>
                    </div>
                </div>
            </div>
            <div class="md:w-1/2">
                <div class="relative rounded-2xl overflow-hidden shadow-2xl aspect-[4/3] bg-white border border-gray-100">
                    <img src="https://i.postimg.cc/Pqn6vsZx/DSC00257.jpg" alt="TIMI 3D Studio" class="w-full h-full object-cover">
                </div>
            </div>
        </div>
    </section>

    <!-- Professional Calculator Section -->
    <section id="calculator" class="section-padding bg-white">
        <div class="container mx-auto px-4">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-extrabold mb-4">Ước tính chi phí nhanh</h2>
                    <p class="text-gray-500">Hệ thống báo giá tự động dựa trên khối lượng file 3D của bạn.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                    <!-- Configurator -->
                    <div class="lg:col-span-7 bg-gray-50 rounded-3xl p-8 md:p-12 border border-gray-100">
                        <div class="space-y-10">
                            <div>
                                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-6 italic">1. Lựa chọn vật liệu</h3>
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                    <button onclick="setMaterial('petg')" id="btn-petg" class="mat-btn p-5 rounded-xl border-2 border-white bg-white text-left card-shadow">
                                        <div class="font-bold text-gray-900">PETG</div>
                                        <div class="text-[10px] text-gray-400 mt-1 uppercase">Đa dụng & Bền</div>
                                    </button>
                                    <button onclick="setMaterial('pla')" id="btn-pla" class="mat-btn p-5 rounded-xl border-2 border-white bg-white text-left card-shadow">
                                        <div class="font-bold text-gray-900">PLA</div>
                                        <div class="text-[10px] text-gray-400 mt-1 uppercase">Thẩm mỹ cao</div>
                                    </button>
                                    <button onclick="setMaterial('abs')" id="btn-abs" class="mat-btn p-5 rounded-xl border-2 border-white bg-white text-left card-shadow">
                                        <div class="font-bold text-gray-900">ABS/ASA</div>
                                        <div class="text-[10px] text-gray-400 mt-1 uppercase">Kỹ thuật cao</div>
                                    </button>
                                </div>
                                <input type="hidden" id="calc-material" value="petg">
                            </div>

                            <div>
                                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-6 italic">2. Khối lượng dự kiến</h3>
                                <div class="flex items-center bg-white border border-gray-200 rounded-2xl p-2 focus-within:border-bambu focus-within:ring-4 focus-within:ring-green-50 transition">
                                    <input type="number" id="calc-weight" placeholder="0" class="flex-1 bg-transparent border-none p-4 text-3xl font-extrabold outline-none text-gray-900">
                                    <span class="px-6 text-xl font-bold text-gray-300">Gram</span>
                                </div>
                                <div id="calc-rate-info" class="mt-4 text-sm font-medium text-gray-400 italic">Nhập khối lượng file để tính giá...</div>
                            </div>

                            <div class="pt-6 border-t border-gray-200">
                                <label class="text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-3">Mã ưu đãi (CTV Access)</label>
                                <input type="password" id="calc-password" placeholder="Nhập mã..." class="w-full sm:w-64 bg-white border border-gray-200 p-3 rounded-xl outline-none focus:border-bambu transition text-sm">
                            </div>
                        </div>
                    </div>

                    <!-- Summary -->
                    <div class="lg:col-span-5 bg-bambu rounded-3xl p-8 md:p-10 text-white shadow-2xl shadow-green-100 flex flex-col justify-between h-full">
                        <div>
                            <h3 class="text-lg font-bold mb-8 flex items-center gap-2">
                                <i class="fas fa-calculator opacity-50"></i> Chi tiết báo giá
                            </h3>
                            
                            <div class="space-y-6">
                                <div class="flex justify-between border-b border-white/20 pb-4">
                                    <span class="text-white/80 text-sm">Tạm tính (Nhựa)</span>
                                    <span id="res-subtotal" class="font-bold text-lg">0đ</span>
                                </div>
                                <div class="flex justify-between border-b border-white/20 pb-4">
                                    <span class="text-white/80 text-sm">Ưu đãi (In > 300g)</span>
                                    <span id="res-discount" class="font-bold text-lg">-0đ</span>
                                </div>
                                <div id="ctv-row" class="hidden flex justify-between bg-black/20 p-4 rounded-xl border border-white/10">
                                    <span class="font-bold text-sm">GIÁ CTV (-30%)</span>
                                    <span id="res-ctv" class="font-black text-xl">0đ</span>
                                </div>
                            </div>
                        </div>

                        <div class="mt-12 text-center">
                            <div id="min-price-warning" class="hidden mb-4 py-1.5 px-4 bg-yellow-400 text-green-900 text-[10px] font-black uppercase rounded-full inline-block">
                                <i class="fas fa-exclamation-triangle mr-1"></i> Giá in tối thiểu: 20.000đ
                            </div>
                            <div class="text-xs uppercase tracking-[0.2em] text-white/70 mb-2">Thanh toán dự kiến</div>
                            <div id="res-total" class="text-6xl font-black mb-10 leading-none">0đ</div>
                            
                            <a href="https://zalo.me/0917777897" class="block w-full bg-white text-bambu py-5 rounded-2xl font-extrabold text-lg transition hover:bg-gray-100 uppercase tracking-widest text-center">
                                Gửi file in ngay
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Tables Section -->
    <section id="pricing" class="section-padding bg-gray-50 border-y border-gray-100">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-extrabold mb-4 uppercase tracking-tight">Bảng giá nhựa tiêu chuẩn</h2>
            <div class="w-12 h-1 bg-bambu mx-auto mb-16"></div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <!-- PETG Card -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-sm">
                    <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center font-black mx-auto mb-6">PETG</div>
                    <div class="space-y-4 mb-6">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-gray-500 uppercase tracking-tighter font-bold">Mẫu < 300g</span>
                            <span class="font-bold text-gray-900">1.000đ/g</span>
                        </div>
                        <div class="flex justify-between items-center text-sm p-3 bg-green-50 rounded-lg">
                            <span class="text-bambu font-bold uppercase tracking-tighter">Mẫu ≥ 300g</span>
                            <span class="font-black text-bambu">550đ/g</span>
                        </div>
                    </div>
                </div>

                <!-- PLA Card -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-sm">
                    <div class="w-12 h-12 bg-green-50 text-green-600 rounded-xl flex items-center justify-center font-black mx-auto mb-6">PLA</div>
                    <div class="space-y-4 mb-6">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-gray-500 uppercase tracking-tighter font-bold">Mẫu < 300g</span>
                            <span class="font-bold text-gray-900">1.100đ/g</span>
                        </div>
                        <div class="flex justify-between items-center text-sm p-3 bg-green-50 rounded-lg">
                            <span class="text-bambu font-bold uppercase tracking-tighter">Mẫu ≥ 300g</span>
                            <span class="font-black text-bambu">650đ/g</span>
                        </div>
                    </div>
                </div>

                <!-- ABS Card -->
                <div class="bg-white p-8 rounded-2xl border border-gray-100 shadow-sm">
                    <div class="w-12 h-12 bg-orange-50 text-orange-600 rounded-xl flex items-center justify-center font-black mx-auto mb-6 text-xs">ABS/ASA</div>
                    <div class="space-y-4 mb-6">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-gray-500 uppercase tracking-tighter font-bold">Mẫu < 300g</span>
                            <span class="font-bold text-gray-900">1.200đ/g</span>
                        </div>
                        <div class="flex justify-between items-center text-sm p-3 bg-green-50 rounded-lg">
                            <span class="text-bambu font-bold uppercase tracking-tighter">Mẫu ≥ 300g</span>
                            <span class="font-black text-bambu">750đ/g</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Material Comparison Section -->
    <section id="compare" class="section-padding bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-20">
                <h2 class="text-3xl md:text-4xl font-extrabold mb-4 uppercase tracking-tighter">Phân tích vật liệu in</h2>
                <p class="text-gray-500 max-w-2xl mx-auto">Mỗi loại nhựa được tinh chỉnh thông số tối ưu để đạt độ bền và thẩm mỹ cao nhất.</p>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- PETG Column -->
                <div class="space-y-8 bg-gray-50 p-6 rounded-3xl border border-gray-200 card-shadow">
                    <h4 class="font-black text-primary-blue text-xl border-l-4 border-bambu pl-3">Nhựa PETG</h4>
                    <ul class="space-y-6">
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ bền va đập</span>
                                <span class="text-xs font-black text-bambu">85%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-bambu h-full rounded w-[85%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Chịu nhiệt (75°C)</span>
                                <span class="text-xs font-black text-bambu">65%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-bambu h-full rounded w-[65%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ bám dính</span>
                                <span class="text-xs font-black text-bambu">95%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-bambu h-full rounded w-[95%]"></div></div>
                        </li>
                    </ul>
                </div>

                <!-- PLA Column -->
                <div class="space-y-8 bg-gray-50 p-6 rounded-3xl border border-gray-200 card-shadow">
                    <h4 class="font-black text-gray-900 text-xl border-l-4 border-green-500 pl-3">Nhựa PLA</h4>
                    <ul class="space-y-6">
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ bền va đập</span>
                                <span class="text-xs font-black text-green-600">50%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-green-500 h-full rounded w-[50%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ mịn bề mặt</span>
                                <span class="text-xs font-black text-green-600">100%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-green-500 h-full rounded w-[100%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Dễ in mẫu khó</span>
                                <span class="text-xs font-black text-green-600">95%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-green-500 h-full rounded w-[95%]"></div></div>
                        </li>
                    </ul>
                </div>

                <!-- ABS Column -->
                <div class="space-y-8 bg-gray-50 p-6 rounded-3xl border border-gray-200 card-shadow">
                    <h4 class="font-black text-gray-900 text-xl border-l-4 border-orange-500 pl-3 text-nowrap">Nhựa ABS/ASA</h4>
                    <ul class="space-y-6">
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Chịu nhiệt (>100°C)</span>
                                <span class="text-xs font-black text-orange-600">95%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-orange-500 h-full rounded w-[95%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Kháng tia UV (ASA)</span>
                                <span class="text-xs font-black text-orange-600">100%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-orange-500 h-full rounded w-[100%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ cứng vật lý</span>
                                <span class="text-xs font-black text-orange-600">90%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-orange-500 h-full rounded w-[90%]"></div></div>
                        </li>
                    </ul>
                </div>

                <!-- TPU Column -->
                <div class="space-y-8 bg-gray-50 p-6 rounded-3xl border border-gray-200 card-shadow">
                    <h4 class="font-black text-gray-900 text-xl border-l-4 border-purple-500 pl-3">Nhựa TPU (Dẻo)</h4>
                    <ul class="space-y-6">
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ linh hoạt</span>
                                <span class="text-xs font-black text-purple-600">100%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-purple-500 h-full rounded w-[100%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Kháng mài mòn</span>
                                <span class="text-xs font-black text-purple-600">95%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-purple-500 h-full rounded w-[95%]"></div></div>
                        </li>
                        <li>
                            <div class="flex justify-between items-end mb-2">
                                <span class="text-xs font-bold text-gray-700 uppercase">Độ bền xé</span>
                                <span class="text-xs font-black text-purple-600">90%</span>
                            </div>
                            <div class="stat-bar"><div class="bg-purple-500 h-full rounded w-[90%]"></div></div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="bg-zinc-900 text-white pt-20 pb-10 border-t border-white/5">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-20 pb-20 border-b border-white/5">
                <div>
                    <h2 class="text-3xl font-extrabold mb-4 italic text-white uppercase text-nowrap">TIMI 3D <span class="text-bambu">PRINT STUDIO</span></h2>
                    <p class="text-zinc-500 font-bold uppercase tracking-[0.3em] text-[10px] mb-12">DỊCH VỤ IN 3D FDM CHUYÊN NGHIỆP</p>
                    
                    <div class="space-y-8">
                        <div class="flex items-start gap-5">
                            <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-bambu shrink-0">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="text-zinc-400 text-sm leading-relaxed">
                                C11-36, đường số 7, KĐT TÂY BẮC,<br>
                                Phường Rạch Giá, Thành phố Rạch Giá, An Giang
                            </div>
                        </div>
                        <div class="flex items-center gap-5">
                            <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-bambu shrink-0">
                                <i class="fas fa-phone-alt"></i>
                            </div>
                            <a href="tel:0917777897" class="text-zinc-100 font-black text-xl hover:text-bambu transition tracking-tight">0917 777 897</a>
                        </div>
                        <div class="flex items-center gap-5">
                            <div class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-bambu shrink-0">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <a href="https://facebook.com/in3drga" target="_blank" class="text-zinc-400 text-sm hover:text-white transition">facebook.com/in3drga</a>
                        </div>
                    </div>
                </div>
                
                <div class="rounded-[2rem] overflow-hidden h-[350px] border border-white/10 group">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3928.324231456234!2d105.074321!3d10.015234!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTDCsDAwJzU0LjgiTiAxMDXCsDA0JzI3LjYiRQ!5e0!3m2!1svi!2s!4v1650530000000!5m2!1svi!2s" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" class="grayscale group-hover:grayscale-0 transition duration-1000"></iframe>
                </div>
            </div>
            
            <div class="py-10 text-center">
                <p class="text-zinc-600 text-[10px] font-bold uppercase tracking-[0.5em]">© 2025 TIMI 3D PRINT STUDIO - AN GIANG • MADE WITH PRECISION</p>
            </div>
        </div>
    </footer>

    <!-- Back to top -->
    <a href="#" class="fixed bottom-8 right-8 w-12 h-12 bg-bambu text-white rounded-full flex items-center justify-center shadow-xl hover:scale-110 transition duration-300 z-50">
        <i class="fas fa-chevron-up"></i>
    </a>

    <script>
        const pricing = {
            petg: { under: 1000, over: 550 },
            pla: { under: 1100, over: 650 },
            abs: { under: 1200, over: 750 }
        };

        const MIN_PRICE = 20000;
        const CTV_PASSWORD = "123456";

        const materialInput = document.getElementById('calc-material');
        const weightInput = document.getElementById('calc-weight');
        const passwordInput = document.getElementById('calc-password');
        const rateInfo = document.getElementById('calc-rate-info');
        
        const resSubtotal = document.getElementById('res-subtotal');
        const resDiscount = document.getElementById('res-discount');
        const resTotal = document.getElementById('res-total');
        const ctvRow = document.getElementById('ctv-row');
        const resCtv = document.getElementById('res-ctv');
        const minPriceWarning = document.getElementById('min-price-warning');

        function setMaterial(mat) {
            materialInput.value = mat;
            document.querySelectorAll('.mat-btn').forEach(btn => {
                btn.classList.remove('active-material');
            });
            const activeBtn = document.getElementById('btn-' + mat);
            activeBtn.classList.add('active-material');
            calculate();
        }

        function formatVND(amount) {
            return new Intl.NumberFormat('vi-VN').format(Math.round(amount)) + 'đ';
        }

        function calculate() {
            const mat = materialInput.value;
            const weight = parseFloat(weightInput.value) || 0;
            const pass = passwordInput.value;
            
            if (weight <= 0) {
                rateInfo.innerText = "Nhập khối lượng file để tính giá...";
                rateInfo.className = "mt-4 text-sm font-medium text-gray-400 italic";
                resSubtotal.innerText = '0đ';
                resDiscount.innerText = '-0đ';
                resTotal.innerText = '0đ';
                ctvRow.classList.add('hidden');
                minPriceWarning.classList.add('hidden');
                return;
            }

            let rate = weight >= 300 ? pricing[mat].over : pricing[mat].under;
            
            if (weight >= 300) {
                rateInfo.innerText = `Ưu đãi in số lượng lớn: Đơn giá ${rate}đ/g`;
                rateInfo.className = "mt-4 text-sm font-black text-bambu";
            } else {
                rateInfo.innerText = `Mức giá chuẩn: Đơn giá ${rate}đ/g`;
                rateInfo.className = "mt-4 text-sm font-bold text-primary-blue";
            }

            let subtotal = weight * rate;
            let discount = 0;

            if (subtotal > 1500000) discount = subtotal * 0.15;
            else if (subtotal > 1000000) discount = subtotal * 0.1;
            else if (subtotal > 500000) discount = subtotal * 0.05;

            let finalTotal = subtotal - discount;

            if (finalTotal > 0 && finalTotal < MIN_PRICE) {
                finalTotal = MIN_PRICE;
                minPriceWarning.classList.remove('hidden');
            } else {
                minPriceWarning.classList.add('hidden');
            }

            resSubtotal.innerText = formatVND(subtotal);
            resDiscount.innerText = '-' + formatVND(discount);
            resTotal.innerText = formatVND(finalTotal);

            if (pass === CTV_PASSWORD) {
                ctvRow.classList.remove('hidden');
                resCtv.innerText = formatVND(finalTotal * 0.7);
            } else {
                ctvRow.classList.add('hidden');
            }
        }

        // Initialize with PETG
        setMaterial('petg');
        [weightInput, passwordInput].forEach(el => el.addEventListener('input', calculate));
    </script>
</body>
</html>
